# Kibana-绘图展示

[ELK - nginx 日志分析及绘图 - hukey - 博客园 (cnblogs.com)](https://www.cnblogs.com/hukey/p/11519612.html)

[toc]

## Discover 

首先是 Discover 这里，每次进来，都需要一目了然的查看日志，做以下配置：

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914170918203-1826275736.png)

 

 ![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914170923063-911065831.png)

 

上面两个设置以后，每次登录进来只需要点击 打开 查看相关模板就能看到清晰的日志数据。

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914170934181-472655354.png)

 

接下来，就是绘制最上面那副图啦。

##  可视化

在绘制之前必须要有数据支撑，因为这个是测试环境没有真是的用户访问。因此需要造一批假数据访问。

方法就是 直接去 access.log 里复制一条数据，修改 real_ip 为 公网ip

假数据添加成功后，来进行图表的配置，点击 可视化

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171008460-526233651.png)

 

 

###  饼图

第1个：http状态TOP5 （饼图）

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171315469-1780001853.png)

 完成后点击保存。

 

第2个：访问省会城市 TOP 5 （饼图）

选择饼图，然后选择 logstash-nginx-* 索引

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171025923-579239111.png)

完成后点击保存。



###  数据表

第3个：域名TOP5 （数据表）

 ![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171117412-2106656346.png)

 完成后点击保存。

 

第4个：后端服务TOP5（数据表）

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171137657-803006825.png)完成后点击保存。

 

第5个：uri top 5（数据表）

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171158766-897281550.png)

 完成后点击保存。



###  水平条形图

第6个：realipTOP5 （水平条形图）

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171224021-218490679.png)

 完成后点击保存。

 

###  坐标地图

第7个：访问分布地图（坐标地图）

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171056562-1145989517.png)

完成后点击保存。

###  图表展示

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171337035-743648824.png)

 

好了， 在 可视化 一栏中，创建了 7 个数据表图，点开 仪表板，将这些图表展示出来就行了。

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171349921-1797704129.png)

 

 

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171357047-1867714541.png)

 

然后将图表摆放好，大功告成。

![img](https://img2018.cnblogs.com/blog/828019/201909/828019-20190914171408307-1023715408.png)