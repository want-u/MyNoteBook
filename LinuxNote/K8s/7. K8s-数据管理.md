# K8s-数据管理

持久化容器数据

```
[root@k8s-master ~]# mkdir volumepod
[root@k8s-master ~]# cd !$

[root@k8s-master volumepod]# kubectl run producer-consumer --image=busybox --dry-run="client" -o yaml > producer-consumer.yaml

[root@k8s-master volumepod]# cat producer-consumer.yaml 
apiVersion: v1
kind: Pod
metadata:
  labels:
    run: producer-consumer
  name: producer-consumer
spec:
  containers:
  - image: busybox
    name: producer
    volumeMounts:
    - mountPath: /producer_dir
      name: shared-volume
    args: ["/bin/sh","-c","echo 'hello world' > /producer_dir/hello; sleep 999999"]

  - image: busybox
    name: consumer
    volumeMounts:
    - mountPath: /consumer_dir
      name: shared-volume
    args: ["/bin/sh","-c","cat /consumer_dir/hello; sleep 999999"]


  volumes:
  - name: shared-volume
    emptyDir: {}

[root@k8s-master volumepod]# kubectl apply -f producer-consumer.yaml

[root@k8s-master volumepod]# kubectl get pod -o wide 
NAME                READY   STATUS    RESTARTS   AGE   IP            NODE        NOMINATED NODE   READINESS GATES
producer-consumer   2/2     Running   0          62s   10.244.1.98   k8s-node1   <none>           <none>
[root@k8s-master volumepod]# kubectl logs producer-consumer consumer 
hello world

```

