# 架构方案

    LB：nginx		*2 【高可用】			2万并发
    
    WEB：nginx+php	*4					4000并发：4*1000		20台
    
    Redis：			*2 【高可用】			2万并发
    
    Mycat：			*2 【高可用】
    
    Mysql：			*2 【主从】			500并发				20台
    
    
    
    					
    30台mysql
    
    mha		🐖主		🐖备主		🐖从	🐖从	🐖从	🐖从	🐖从 			
    
    								
    								🐖 	🐖	🐖	🐖	🐖	【主从】 * 5		25台


---



```
LB    web       	php
                  
                	php

                	php

LB    web       	php
```




```
LB：负责均衡【高可用】
web：处理静态页面，并且将动态交给后端php组
    upstrem php {
      php:9000;
      ...
    }
      ...
    location .php {
      proxy_pass php;
    }
php：处理动态页面
```

